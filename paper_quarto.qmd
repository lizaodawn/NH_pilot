---
engine: knitr
title: "Keyword and Collocation analysis on India-related text of Natural History"
author: "Dawn, Lizao Zhuang (r0914937)"
format: 
  html:
    theme: journal
    toc: true
    code-link: true
    abstract-title: "Abstract"
number-sections: true
code-fold: true
bibliography:
  - references.bib
  - packages.bib  
csl: unified-style-sheet-for-linguistics.csl
abstract: 'This paper presents a comprehensive analysis of keywords and collocates related to India in a corpus of Natural History by Pliny the Elder. The study focuses on uncovering prominent themes and topics associated with India in the context of the book. The research employs keyword analysis and collocate examination techniques to reveal significant insights into the perception and imagination of India, as a competent counterpart to the Roman Empire, by Pliny the Elder and the scholars of his time.'
---

```{r setup, include=FALSE}
library('tidyverse')
library('mclm')
library('here')
library('kableExtra')
library('dplyr')
library('ggplot2')
library('leaflet')
options(digits = 3)

knitr::write_bib(
  c("base", "mclm", "ggplot2", "tidyverse", "leaflet"),
  here("packages.bib")
)
```

# Research Question

Pliny the Elder's *Natural History* stands as a seminal work in the history of encyclopedias, serving as a gateway to understanding the knowledge and worldview of ancient Rome. Beyond its role as a compendium of diverse subjects, the text provides a captivating glimpse into the actual merchant exchanges [@dodd2021] of the Roman Empire while shedding a light on the spatial imagination of Pliny and the scholarly references of his time [@plinyth2011].

The text of the whole book has been digitized and annotated with people's name, places' name and coordinates by [TOPOSText](https://topostext.org/the-project) project since 2012. This invaluable resource allows for the creation of a dataset that includes both the textual contents and geographical annotations, which can be utilized to investigate the distribution of place names in the entire text and examine the frequencies and patterns of geographically-related content.

As a starting point, @fig-geoname reveals the Top 20 distinct geographical names mentioned within the text.

```{r}
#| label: fig-geoname
#| fig-cap: Bar Chart for Top 20 Distinct Place Names Mentioned in Natural History
#| fig-cap-location: top
#| warning: false
#| echo: false


data <- read.csv("geotext_whole.csv")

summary_data <- data %>%
  group_by(ToposText_ID, Place_Name, Lat, Long) %>%
  summarise(Count = n()) %>%
  arrange(desc(Count)) %>%
  ungroup()

top_20_summary_data <- summary_data %>%
  top_n(20, Count) %>%
  ungroup()

ggplot(top_20_summary_data, aes(x = reorder(Place_Name, -Count), y = Count)) +
  geom_bar(stat = "identity") +
  labs(x = "Place Name", y = "Count") +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))

```

An intriguing observation from this analysis, as depicted in @fig-map, is the prominence of India---a region outside the Mediterranean---despite its high frequency of mentions.

```{r}
#| label: fig-map
#| fig-cap: Mapping of geographical names mentioned in Natural History
#| fig-cap-location: top
#| warning: false
#| echo: false

m <- leaflet() %>%
  addTiles() %>%
  addCircleMarkers(
    data = top_20_summary_data,
    lat = ~Lat,
    lng = ~Long,
    radius = sqrt(top_20_summary_data$Count) * 0.8,  
    color = "blue",
    fill = TRUE,
    fillOpacity = 0.6,
    popup = paste("Place Name:", top_20_summary_data$Place_Name, "<br>",
                  "Count:", top_20_summary_data$Count)
  ) 

m

```

Building upon this observation, this paper aims to delve deeper into the themes associated with the India region referred in the text by employing keyword analysis and collocation analysis methods within the framework of corpus linguistics.

The analysis is conducted in R environment [@R-base], and the main anlysing methods are applied through functions from [mclm](https://masterclm.github.io/mclm/) [@R-mclm] package. In addition, [tidyverse](https://www.tidyverse.org/) [@R-tidyverse] and [leaflet](https://rstudio.github.io/leaflet/) [@R-leaflet] are used for data manipulation and visualisation.

# Corpus Description

As mentioned earlier, the digitized text of *Natural History* with geographical annotations is readily accessible through the [TOPOSText](https://topostext.org/work/148 "Check Natural History on ToposText") project. In order to facilitate the analysis, I conducted a scraping of the full text, exporting it as a **reference corpus** in .txt format. Furthermore, I extracted the texts specifically associated with the Indian subcontinent, utilizing the annotated coordinates, creating a **target corpus** of geographically related texts focused on India. The scraping was conducted with [Beautiful Soup](https://www.crummy.com/software/BeautifulSoup/bs4/doc/) library in Python, and the [code](https://github.com/lizaodawn/zhuang/blob/papertry/Natural%20History_corpus%20scrape.ipynb) is uploaded to the same repository of the project.[^1]

[^1]: As this paper represents a preliminary investigation for my master's thesis, I utilized the corpus that had already been scraped using Python.

```{r}
#| label: prepare-corpus
#| warning: false

refcorpus_folder <- here("NH_wholetext")
fnames_wholetext <- get_fnames(refcorpus_folder) %>% 
  keep_re("[.]txt")


tarcorpus_folder <-  here("NH_geotext_india")
fnames_indiatext <- get_fnames(tarcorpus_folder) %>% 
  keep_re("[.]txt")

ref_flist <- freqlist(fnames_wholetext, re_token_splitter = re("\\s+"))
tar_flist <- freqlist(fnames_indiatext, re_token_splitter = re("\\s+"))
```

The **target corpus** consists of all text related to Indian subcontinent (with coordinates in range of *8째4'N-37째6'N and 68째7'E to 97째25'E*), segregated by paragraphs, containing `r prettyNum(n_tokens(tar_flist))` tokens and `r n_types(tar_flist)` types, with the type-token ratio of `r round(n_types(tar_flist)/n_tokens(tar_flist), 2)`.

And the **reference corpus** consists of all texts in *Natural History*, segregated by paragraphs, consisting of `r prettyNum(n_tokens(ref_flist))` tokens and `r n_types(ref_flist)` types, with the type-token ratio of `r round(n_types(ref_flist)/n_tokens(ref_flist), 2)`.

The punctuation marks are removed in the tokenization process.

# Keyword analysis on India-related texts

As mentioned, the method of keyword analysis could help with a further discuss about the prominent theme and topic in the India-related texts.

The frequency lists for the **target corpus** (Indian subcontinent related texts) and **reference corpus** (whole text) are generated respectively, and the association scores are calculated through the [assoc_scores](https://masterclm.github.io/mclm/reference/assoc_scores.html) function. The association score is filtered based on the criteria of both PMI and $G^2$ scores, requiring a minimum score of 2. This criterion ensures that the selected words have a probability at least four times higher than the overall data, along with statistically significant supporting evidence [@methods], allowing to identify the most statistically significant keywords in India-related texts when compared to the reference corpus.

During the calculation of word frequencies in the **target corpus**, the specific word "India" itself was excluded from the analysis. This exclusion was intentional, aiming to focus on more descriptive words within the corpus and efficiently identify potential thematic keywords in the **target corpus**.

```{r}
#| label: keyword
#| warning: false


# build frequency list for target corpus
flist_target <- fnames_indiatext %>%
  freqlist(
    re_token_transf_in = "[[:punct:]]", # Match punctuation marks
    token_transf_out = "", # Replace punctuation marks with an empty string
    re_drop_token = "india"
  )

# build frequency list for reference corpus
flist_ref <- fnames_wholetext %>%
  freqlist(
    re_token_transf_in = "[[:punct:]]", # Match punctuation marks
    token_transf_out = ""
  ) 

# calculate scores
scores_kw <- assoc_scores(flist_target, flist_ref)

top_scores_kw <- scores_kw %>% 
  filter(PMI >= 2 & G_signed >= 2)

```

The following tables present the top 20 keywords in India-related texts as compared to the entire texts in *Natural History*. They are sorted based on their PMI (@tbl-kwtable_PMI) and G_signed scores (@tbl-kwtable_Gsigned), respectively. The initial sorting was carried out based on the PMI scores (@tbl-kwtable_PMI), since the it serves as a crucial indicator for measuring the keyness of words.

::: panel-tabset
## Sorted by PMI

```{r}
#| warning: false
#| echo: false
#| label: tbl-kwtable_PMI
#| tbl-cap-location: top
#| tbl-cap: Top 20 Keywords on Indian Related Text in Natural History (sorted by PMI)

top_scores_kw %>% 
  as_tibble() %>%
  select(type, a, PMI, G_signed) %>% 
  slice_max(order_by = PMI, n = 20, with_ties = TRUE) %>%                       
  kbl(col.names = c("Type", "Frequency", "PMI", r"(Signed $G^2$)")) %>% 
  kable_minimal() %>% 
  scroll_box(height = "400px")
```

## Sorted by G_signed

```{r}
#| warning: false
#| echo: false
#| label: tbl-kwtable_Gsigned
#| tbl-cap-location: top
#| tbl-cap: Top 20 Keywords on Indian Related Text in Natural History (sorted by G_Signed)

top_scores_kw %>% # also valid for top_scores_colloc
  as_tibble() %>%
  select(type, a, PMI, G_signed) %>%         # sort by PMI (descending) 
  slice_max(order_by = G_signed, n = 20, with_ties = TRUE) %>%   # select top 30 rows
  kbl(col.names = c("Type", "Frequency", "PMI", r"(Signed $G^2$)")) %>% 
  kable_minimal() %>% 
  scroll_box(height = "400px")
```
:::

From these keywords, a manual examination was performed to determine their meaning and assign appropriate tags as based on their category. The resulting explanations for the top 20 keywords, sorted by PMI, can be found in @tbl-kwlist below.

```{r}
#| warning: false
#| echo: false
#| label: tbl-kwlist
#| tbl-cap: Top 20 keywords with meaning sorted by PMI
#| tbl-cap-location: top

keyword_PMI_list <- data.frame(
  Word = c("ganges", "beryls", "ichthyophagi", "megasthenes", "obsidian", "bdellium", "agates", "callaina", "condensation", "gerra", "jomanes", "nonius", "prasii", "alia", "carnelian", "cophes", "hypasis", "merchandize", "peppertree", "sacae", "sandastros", "thornbush"),
  Exp = c("a major river in India", "a type of gemstone", "a group of people who primarily subsist on fish", "a Greek historian and diplomat", "a type of volcanic glass", "a fragrant resin obtained from certain trees", "a type of semiprecious gemstone", "pale green precious stone (lat)", "the process of vapor turning into a liquid state", "war (lat)", "a Roman nomen gentile, gens or \"family name\"", "a Roman nomen gentile, gens or \"family name\"", "prase, green coloured gem", "by another / different way / route (lat)", "a reddish-brown variety of chalcedony", "a river that rises in the ancient Paropamise range, eventually falling into the Indus river near its confluence with the Cophes river", "a river in north India", "goods or commodities", "a tree that produces peppercorns", "the easternmost nation of Elibe, situated to the south of Ilia and the north of Bern", "a precious stone found in India and Arabia", "any of many thorny or spiny shrubs and bushes"),
  Tag = c("river", "goods", "people", "people", "goods", "goods", "goods", "goods", "activity", "activity", "people", "people", "goods", "route", "goods", "river", "river", "goods", "tree", "river", "goods", "tree"),
  Sub_tag = c("N/A", "stone", "group of people", "famous people", "others", "others", "stone", "stone", "producing activity", "N/A", "human name", "human name", "stone", "N/A", "stone", "N/A", "N/A", "general", "origin of goods", "N/A", "stone", "N/A")
) 

keyword_PMI_list %>% 
  as_tibble() %>%
  select(Word, Exp, Tag, Sub_tag) %>%                        
  kbl(col.names = c("Word", "Exp", "Category", "Sub_category")) %>% 
  kable_minimal()
```

The distribution plot of categories, as demonstrated in @fig-kwtype, reveals the pattern regarding keywords of India-related texts in *Natural History*.

```{r}
#| warning: false
#| echo: false
#| label: fig-kwtype
#| fig-cap: Top 20 keywords type distribution
#| fig-cap-location: top

tag_counts <- keyword_PMI_list %>%
  count(Tag) %>%
  arrange(desc(n))

# Plot the tag distribution
ggplot(tag_counts, aes(x = n, y = reorder(Tag, -n), fill = Tag)) +
  geom_bar(stat = "identity") +
  labs(x = "Count", y = "Tag", fill = "Tag") +
  theme_minimal() +
  coord_flip()
```

Significantly, a substantial number of the keywords in the India-related text revolve around goods, particularly precious stones, suggesting a prominent thematic focus. The presence of keywords such as "beryls", "obsidian", "bdellium", "agates", "callaina", "prasii", "carnelian" and "sandastros" indicates the involvement of various gemstones and goods associated with India. These findings are complemented by the presence of keywords like "condensation", "merchandize" and "peppertree" which suggest the production and trade of goods between the Roman Empire and the Indian subcontinent during that era.

Furthermore, the keywords related to rivers in India, such as "ganges", "cophes", "hypasis," and "sacae" indicate their significance as sources of goods or as integral parts of trading routes. Since Pliny the Elder's contextual framework includes critical descriptions of the geographical surroundings like rivers, as evident in his references to the Po River and the Nile River [@pollard2009; @murphy2003], a deeper investigation into the portrayal and role of Indian rivers within this context would provide valuable insights.

Additionally, a notable proportion of the keywords pertain to people, encompassing names, descriptions, and specific historical figures like "megasthenes". This suggests the historical significance of individuals who played a role in trade with India or in documenting and understanding the region.

In conclusion, the keywords extracted from the India-related text in the *Natural History* shed light on India's role in trade, the production of valuable goods, and its association with notable historical figures and geographical features within the perspective of Pliny the Elder during the 1st century BC in the context of the Roman Empire. These findings could also contribute to a better understanding of India's historical interactions with the broader ancient world.

# Collocation analysis on "India" in the whole corpus

In addition to examining the keywords in the India-related texts, it is also valuable to explore the collocates that appear alongside the word "India" when mentioned in the book.

To analyse the co-text surrounding the term "India," the [surf_cooc](https://masterclm.github.io/mclm/reference/create_cooc.html) function was employed, with "india" designated as the target item for the analysis. And following the same criteria as the previous keyword analysis, the collocation scores were filtered of having both PMI and G_signed scores of 2 or higher. By employing this approach, the prominent collocates of "india" were identified, providing a tangible understanding of the prevailing discourse and potentially reflecting Pliny the Elder's perspective on the region.

```{r}
#| label: collocation
#| warning: false

coocs <- fnames_wholetext %>% 
  surf_cooc("(?xi)  ^ india $", 
            re_token_transf_in = "[[:punct:]]", # Match punctuation marks
            token_transf_out = "")

# calculate scores
scores_colloc <- assoc_scores(coocs)

top_scores_colloc <- scores_colloc %>% 
  filter(PMI >= 2 & G_signed >= 2)
```

@tbl-coltable_Gsigned and @tbl-coltable_PMI display the top 20 collocates associated with the word "india" in the entire text, respectively sorted by G_signed and PMI scores. As the returned $G^2$ score helps gauge the strength of evidence regarding the independence between the two words [@methods], thereby facilitating the initial sorting.

::: panel-tabset
## Sorted by G_singed

```{r}
#| label: tbl-coltable_Gsigned
#| tbl-cap-location: top
#| tbl-cap: Top 20 collocates to the word "india" in Natural History (sorted by G_signed)
#| warning: false
#| echo: false
top_scores_colloc %>% 
  as_tibble() %>%
  select(type, a, PMI, G_signed) %>% 
  slice_max(order_by = G_signed, n = 20, with_ties = TRUE) %>%
  kbl(col.names = c("Type", "Frequency", "PMI", r"(Signed $G^2$)"), escape = FALSE) %>%
  kable_minimal() %>% 
  scroll_box(height = "400px")

```

## Sorted by PMI

```{r}
#| label: tbl-coltable_PMI
#| tbl-cap-location: top
#| tbl-cap: Top 20 collocates to the word "india" in Natural History (sorted by PMI)
#| warning: false
#| echo: false

top_scores_colloc %>% 
  as_tibble() %>%
  select(type, a, PMI, G_signed) %>%
  slice_max(order_by = PMI, n = 20, with_ties = TRUE) %>% 
  kbl(col.names = c("Type", "Frequency", "PMI", r"(Signed $G^2$)"), escape = FALSE) %>% 
  kable_minimal() %>% 
  scroll_box(height = "400px") 

```
:::

The top 20 collocates associated with the word "India," sorted by their $G^2$ scores, reveal three key dimensions:

1.  **Geographical Connections**: The collocates such as "arabia", "ethiopia", "east," "south," "opposite," and "beyond" indicate the geographical relationships and proximity between India and these regions.

2.  **Trading and Imports**: The presence of collocates like "imported", "produces", "produce" and "nations" suggests that India had a significant role in trade and the importation of goods. It also implies that India was known for producing various commodities that were sought after by other nations.

3.  **Boundaries and Borders**: The collocates "boundary," "set" and "part" indicate the existence of defined boundaries or borders related to India. This suggests that there were recognized territorial demarcations associated with India during the referenced period.

Within the context of Pliny the Elder's *Natural History* is a book with an encyclopedia scope written in Roman Empire, these collocates suggest the interconnecting role India played in the network of interactions, trade, or cultural exchanges between India and the Mediterranean regions during 1st century BC. They highlight India's significance as a trading partner, its geographical positioning, and the recognition of its territorial boundaries.

Furthermore, the concordance table of the word "india" as displayed in @tbl-concordance, presents a comprehensive overview of the instances where "india" appears throughout the text, showcasing the specific contexts as well as providing additional information regarding the references to "India." It serves as a valuable resource for understanding the various perspectives, descriptions, and associations attributed to India within the context of *Natural History*.

```{r}
#| label: tbl-concordance
#| tbl-cap-location: top
#| tbl-cap: Concordance table of word "india" in Natural History
#| warning: false
#| echo: false

conc_data <- conc(fnames_wholetext, '\\bindia\\b')

conc_data %>%
  as_tibble() %>%
  select(source, left, match, right) %>%
  mutate(
    source = short_names(source),
    book = as.integer(gsub("^(\\d+).*", "\\1", source)),
    chapter = as.numeric(gsub("^\\d+\\.(\\d+)\\.\\d+_text$", "\\1", source)),
    paragraph = as.numeric(gsub("^\\d+\\.\\d+\\.(\\d+)_text$", "\\1", source))
  ) %>%
  arrange(book, chapter, paragraph) %>%
  select(book, chapter, paragraph, left, match, right) %>%
  kbl(align = c("r", "r", "r", "c", "l", "l", "l")) %>%
  kable_paper(font_size = 15) %>%
  scroll_box(height = "400px")
```

# Conclusion

In conclusion, this paper located the research question on potential theme and topics in texts about India in Pliny the Elder's *Natural History* based on the prominent distribution of "India" in the entire text comparing to other place names. The analysis was conducted with the keyword analysis and collocation analysis in a framework of corpus linguistics.

The analysis of keywords in the India-related text revealed significant themes such as the rivers, gemstones, goods, and historical figures like Megasthenes. These findings emphasize the cultural, geographical, and historical importance of India in the scope of scholars in Roman Empire during 1st century BC.

Moreover, the exploration of collocates uncovered the geographical connections, trading networks, and territorial boundaries linked to India. The collocates highlighted the close relationships with neighboring regions such as Arabia and Ethiopia, along with references to trade, imports, and commodity production.

Additionally, the study provided information on the specific contexts and usage of the word "India" within Pliny the Elder's *Natural History*, as a resource for further analysis about the discourse and recognition of India during that era.

While this research represents an initial exploration, it paves the way for future investigations. Subsequent studies can expand the analysis to encompass a wider range of texts, explore different domains within Indian subcontinent-related literature, and utilize advanced natural language processing techniques to gain deeper semantic insights.
